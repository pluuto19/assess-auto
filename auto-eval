#!/usr/bin/env bash
while getopts p: flag
do
   case $flag in
      p) fPath=${OPTARG};;
   esac
done

for rarFile in $(ls $fPath/*.rar)
do
   dirName=$(echo $rarFile | awk -F'.' '{print $1}')
   echo $dirName
   echo "$rarFile"
   mkdir $dirName && unrar e $rarFile $dirName -inul
   cd $dirName
#   gcc $(ls)
   for cFile in $(ls)
   do
      gcc $cFile -o "$(echo $cFile | awk -F'.' '{print $1}').o"
   done
   ls
   cd ..
done
